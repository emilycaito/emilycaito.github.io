var cssTooltip="#tooltip{    text-align: center;    color: #fff;    background: #111;    position: absolute;    font-size: 0.8em;    line-height: 1.3em;    z-index: 100;    padding: 15px;} #tooltip:after{ /* triangle decoration */	width: 0;	height: 0;	border-left: 10px solid transparent;	border-right: 10px solid transparent;	border-top: 10px solid #111;	content: '';	position: absolute;	left: 50%;	bottom: -10px;	margin-left: -10px;}#tooltip.top:after{	border-top-color: transparent;	border-bottom: 10px solid #111;	top: -20px;	bottom: auto;}#tooltip.left:after{	left: 10px;	margin: 0;}#tooltip.right:after{	right: 10px;	left: auto;	margin: 0;}";$(document).ready(function(){Footnotes.initTooltip()});var Footnotes={isIOS:function(){var a=navigator.userAgent.toLowerCase();return(a.indexOf("iphone")>=0||a.indexOf("ipad")>=0||a.indexOf("ipod")>=0)},isAndroid:function(){var a=navigator.userAgent.toLowerCase();return(a.indexOf("android")>=0)},initTooltip:function(){var a=$("[rel~=footnote]");$("body").append("<style>"+cssTooltip+"</style>");a.unbind("mouseover",Footnotes.addTooltip);a.unbind("mouseout",Footnotes.removeTooltip);a.bind("mouseover",Footnotes.addTooltip);a.bind("mouseout",Footnotes.removeTooltip)},addTooltip:function(){$("#tooltip").stop();$("#tooltip").remove();var d=$(this);var f=d.attr("href").substr(1);var a=document.getElementById(f);var c=$(a).html();c=c.replace(/<p>(.+)<a href="#fnref.+<\/a><\/p>/,"$1");if(!c||c==""){return false}var b=$('<div id="tooltip"></div>');if(Footnotes.isIOS()){b.bind("click",Footnotes.removeTooltip)}else{if(Footnotes.isAndroid()){b.bind("click",Footnotes.removeTooltip);d.click(function(g){g.preventDefault()})}else{b.bind("mouseover",Footnotes.hoverTooltip);b.bind("mouseout",Footnotes.removeTooltip)}}b.css("opacity",0).html(c).appendTo("body");var e=function(){if($(window).width()<640){b.css("max-width",$(window).width()/2)}else{b.css("max-width",340)}var g=d.offset().left+(d.outerWidth()/2)-(b.outerWidth()/2),h=d.offset().top-b.outerHeight()-30;if(g<0){g=d.offset().left+(d.outerWidth()/2)-20;b.addClass("left")}else{b.removeClass("left")}if(g+b.outerWidth()>$(window).width()){g=d.offset().left-b.outerWidth()+(d.outerWidth()/2)+20;b.addClass("right")}else{b.removeClass("right")}if(h<0){var h=d.offset().top+d.outerHeight();b.addClass("top")}else{b.removeClass("top")}b.css({left:g,top:h}).animate({top:"+=10",opacity:1},100)};e();$(window).resize(e())},removeTooltip:function(){var a=$("#tooltip");a.animate({top:"-=10",opacity:0},100,function(){a.remove()})},hoverTooltip:function(){var a=$("#tooltip");a.stop();a.css("opacity",1)}};